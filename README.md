# Паттерн observer.

<b>Теория</b>

[Observer (Наблюдатель)](https://refactoring.guru/ru/design-patterns/observer) — это поведенческий паттерн проектирования, который создаёт механизм подписки, 
позволяющий одним объектам следить и реагировать на события, происходящие в других объектах.

Давайте называть Издателями (Publishers) те объекты, которые содержат важное или интересное для других состояние. Остальные объекты, 
которые хотят отслеживать изменения этого состояния, назовём Подписчиками (Subscribers).

Паттерн Наблюдатель предлагает хранить внутри объекта издателя список ссылок на объекты подписчиков, 
причём издатель не должен вести список подписки самостоятельно. Он предоставит методы, с помощью которых 
подписчики могли бы добавлять или убирать себя из списка.

![image](https://user-images.githubusercontent.com/35418986/170135226-b0ad3fe8-00ec-4073-aa47-708626bf86aa.png)

Когда в издателе будет происходить важное событие, он будет проходиться по списку подписчиков и оповещать их об 
этом, вызывая определённый метод объектов-подписчиков.

Издателю безразлично, какой класс будет иметь тот или иной подписчик, так как все они должны следовать общему интерфейсу и иметь единый метод оповещения.

![image](https://user-images.githubusercontent.com/35418986/170135361-4300db2b-f34e-414c-9ae9-e24076f2b754.png)

Итоговая структура должна выглядеть примерно следующим образом:

![image](https://user-images.githubusercontent.com/35418986/170135883-4beec581-d94b-46c7-9d36-ed001494d073.png)

<b>Задание</b>

Разработайте систему оповещения городских служб о происшествиях. Система должна представлять собой реализацию паттерна Наблюдатель, где 
<i>издателем будет являться "Диспетчер" (Dispatcher)</i>, а <i>подписчиками будут городские службы (FireDepartment, Ambulance, Police, ...) </i>. 

К системе предъявляются следующие требования:
1. У диспетчера должны быть методы `subscribe` и `unsubscribe` для подписки и отписки городских служб на события.
2. У диспетчера должен быть метод `notify`, который принимает строку и оповещает подписчиков.
3. Каждая из городских служб имеет свой набор ключевых слов. Диспетчер должен оповещать только те городские службы, чьи 
ключевые слова находились в сообщении переданном в `notify`.
4. Каждый из подписчиков также должен иметь метод `notify`, через который их можно оповестить.
5. В системе должна быть возможность добавлять новые типы городских служб без модификации диспетчера.
6. Ключевые слова городских служб должны быть известны только самим городским службам.

<b>Пример</b>
```cpp
Dispatcher dispatcher;
FireDepartment fireDepartment;
Ambulance ambulance;
Police police;
dispatcher.subscribe(&fireDepartment);
dispatcher.subscribe(&ambulance);
dispatcher.subscribe(&police);
dispatcher.notify("The house is on fire! And somebody is hurt!");
// console output:
// Fire Department is called
// Ambulance is called
```
